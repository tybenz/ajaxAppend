<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<meta charset="utf-8">
	<title>Ajax Append | Tyler Benziger</title>
	<meta name="author" content="Tyler Benziger">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

  <link href="css/bitstream.css" type="text/css" rel="stylesheet">
  <link href="css/styles.css" type="text/css" rel="stylesheet">
  <link href="css/ajax.css" type="text/css" rel="stylesheet">
  <link href="css/code.css" type="text/css" rel="stylesheet">

	<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-33073396-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
	</script>
  <script type="text/javascript">
    $(function() {
      $('#rf1').ajaxAppend({
        dataName: 'stories',
        templates: [{
          template: $('#story-template').text(),
          selector: '#whats-new-feed .post:first',
          order: 'replace',
          callback: function() {
            var val = parseInt( $('#rf1 [name=num]').val() );
            $( '#rf1 [name-num]' ).val( val + 1 );
          },
          formReset: false
        }]
      });
    });
  </script>
</head>
<body>
    
  
  <div class="sidebar">
    <div class="header">
      <h1>Ajax Append</h1>
    </div>
    <ul class="nav">
      <li>
        <a href="http://github.com/tybenz/ajaxAppend/zipball/master">Zip</a>
      </li>
      <li>
        <a href="http://github.com/tybenz/ajaxAppend/tarball/master">Tar</a>
      </li>
      <li>
        <a href="http://github.com/tybenz/ajaxAppend">Fork</a>
      </li>
    </ul>
    <div class="social">
      <a href="http://github.com/tybenz">
        <img src="img/octocat.png" alt="" />
      </a>
      <a href="http://twitter.com/tybenz">
        <img src="img/twitter.png" alt="" />
      </a>
    </div>
  </div>

  <div class="main">
    <h2 id='about'>About</h2>

<p>This is a jQuery Plugin designed to work with Rail&#8217;s UJS remote forms. It makes it easier to automatically inject populated templates into your page based on a JSON AJAX response.</p>

<h2 id='example'>Example</h2>

<p>This is an example of a form that is meant to grab a block of &#8220;posts&#8221; and inject them into a feed div</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- Initializing the ajaxAppend plugin --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span><span class='nt'>&gt;</span>
    <span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;#rf1&#39;</span> <span class='p'>).</span><span class='nx'>ajaxAppend</span><span class='p'>({</span>
        <span class='nx'>dataName</span><span class='o'>:</span> <span class='s1'>&#39;stories&#39;</span><span class='p'>,</span>
        <span class='nx'>templates</span><span class='o'>:</span> <span class='p'>[{</span>
            <span class='nx'>template</span><span class='o'>:</span> <span class='nx'>$</span><span class='p'>(</span> <span class='s2'>&quot;#story-template&quot;</span> <span class='p'>).</span><span class='nx'>text</span><span class='p'>(),</span>
            <span class='nx'>selector</span><span class='o'>:</span> <span class='s1'>&#39;#whats-new-feed&#39;</span><span class='p'>,</span>
            <span class='nx'>order</span><span class='o'>:</span> <span class='s1'>&#39;prepend&#39;</span>
        <span class='p'>}],</span>
        <span class='nx'>formReset</span><span class='o'>:</span> <span class='kc'>false</span>
    <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>

<span class='c'>&lt;!-- Template for our news story --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;underscore-template&quot;</span> <span class='na'>id=</span><span class='s'>&quot;story-template&quot;</span><span class='nt'>&gt;</span>
    <span class='o'>&lt;%</span> <span class='nx'>_</span><span class='p'>.</span><span class='nx'>each</span><span class='p'>(</span><span class='nx'>stories</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>post</span> <span class='p'>)</span> <span class='p'>{</span> <span class='o'>%&gt;</span>
        <span class='o'>&lt;</span><span class='nx'>div</span> <span class='kr'>class</span><span class='o'>=</span><span class='s2'>&quot;post&quot;</span><span class='o'>&gt;</span>
            <span class='o'>&lt;</span><span class='nx'>h4</span><span class='o'>&gt;&lt;</span><span class='nx'>span</span> <span class='kr'>class</span><span class='o'>=</span><span class='s2'>&quot;date&quot;</span><span class='o'>&gt;&lt;</span><span class='err'>/span&gt;&lt;/h4&gt;</span>
            <span class='o'>&lt;</span><span class='nx'>p</span><span class='o'>&gt;</span>
                
            <span class='o'>&lt;</span><span class='err'>/p&gt;</span>
        <span class='o'>&lt;</span><span class='err'>/div&gt;</span>
    <span class='o'>&lt;%</span> <span class='p'>});</span> <span class='o'>%&gt;</span>
<span class='nt'>&lt;/script&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;whats-new&quot;</span><span class='nt'>&gt;</span>
    <span class='nt'>&lt;h3&gt;</span>News Example<span class='nt'>&lt;/h3&gt;</span>
    <span class='nt'>&lt;form</span> <span class='na'>id=</span><span class='s'>&quot;rf1&quot;</span> <span class='na'>data-remote=</span><span class='s'>&quot;true&quot;</span> <span class='na'>action=</span><span class='s'>&quot;get.php&quot;</span> <span class='na'>method=</span><span class='s'>&quot;post&quot;</span> <span class='na'>style=</span><span class='s'>&quot;&quot;</span><span class='nt'>&gt;</span>
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;hidden&quot;</span> <span class='na'>name=</span><span class='s'>&quot;num&quot;</span> <span class='na'>value=</span><span class='s'>&quot;0&quot;</span> <span class='nt'>/&gt;</span>
    
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;submit&quot;</span> <span class='na'>value=</span><span class='s'>&quot;Get More News&quot;</span> <span class='nt'>/&gt;</span>
    <span class='nt'>&lt;/form&gt;</span>
    <span class='c'>&lt;!-- This is where the templates will be injected --&gt;</span>
    <span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;whats-new-feed&quot;</span><span class='nt'>&gt;</span>
    <span class='nt'>&lt;/div&gt;</span>
    <span class='nt'>&lt;br</span> <span class='na'>class=</span><span class='s'>&quot;clear&quot;</span> <span class='nt'>/&gt;</span>
<span class='nt'>&lt;/div&gt;</span>
</code></pre>
</div>
  </div>

</body>
</html>
